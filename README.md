# 内部报价系统 v2.0

## 系统概述

这是一个基于Web的内部报价系统，专为局域网环境设计，支持管理员后台管理和销售员前台操作，实现权限分离和数据隔离。系统支持USD币种、多行查价、双语报价单等高级功能。

## 主要特性

### 🔐 权限管理
- **管理员后台**：产品管理、价目表维护、用户管理、系统设置
- **销售员前台**：快速查价、新建报价、我的报价、我的客户
- **数据隔离**：销售员只能查看自己的数据，管理员可查看全部

### 💰 币种与格式
- **币种**：所有金额以USD显示
- **格式**：$1,234.56（两位小数，千分位分隔符）
- **计算**：内部计算与显示保持一致

### 🔍 快速查价（前台）
- **多行输入**：支持增删多行产品信息
- **完整信息**：品类、系统、产品编号1、产品编号2、宽/高、单位、数量
- **智能匹配**：自动匹配价格表，返回单价和小计
- **单位保持**：结果尺寸单位与输入一致
- **一键跳转**：确认后可直接加入报价单

### 📋 报价单功能
- **详细内容**：包含所有产品信息和附加价格
- **双语支持**：中英文切换（PDF/Excel/打印一致）
- **完整信息**：客户信息、产品明细、付款条款、银行信息
- **销售员信息**：自动关联当前登录销售员联系方式

### 🛡️ 价目表权限
- **前台隐藏**：销售员无法查看价目表区间条目
- **后台管理**：仅管理员可查看/维护/导入导出
- **数据安全**：前台查价仅返回数值，不暴露价格区间

## 系统架构

### 登录与导航隔离
```
登录页面
├── 管理员 → 后台管理
│   ├── 产品管理
│   ├── 价目表管理
│   ├── 用户管理
│   ├── 报价管理
│   └── 系统设置
└── 销售员 → 前台操作
    ├── 快速查价
    ├── 新建报价
    ├── 我的报价
    └── 我的客户
```

### 数据可见范围
- **销售员**：仅自己的客户与报价历史
- **管理员**：全部数据，包括所有用户的数据

## 技术特点

- **纯前端实现**：无需服务器，直接在浏览器中运行
- **响应式设计**：支持桌面端和移动端访问
- **本地存储**：使用浏览器LocalStorage保存数据
- **离线使用**：可在局域网内离线使用
- **易于集成**：后续可轻松集成到公司网站中

## 使用方法

### 快速开始

1. 直接在浏览器中打开 `index.html` 文件
2. 使用默认账号登录：
   - **管理员**：admin / admin123
   - **销售员**：sales1 / sales123
3. 系统会自动初始化默认数据

### 销售员操作流程

#### 1. 快速查价
1. 点击"快速查价"标签
2. 点击"+ 添加行"添加产品行
3. 填写每行信息：品类、系统、产品编号、尺寸、数量
4. 点击"查询价格"按钮
5. 查看匹配的价格结果
6. 点击"确认 → 加入报价"跳转到报价单

#### 2. 新建报价单
1. 点击"新建报价单"标签
2. 填写客户信息（名称、电话、地址、邮箱）
3. 产品明细会自动填充（如果从查价跳转）
4. 设置附加价格、税率、运费
5. 保存、导出或打印报价单

#### 3. 我的报价/客户
- 查看自己创建的报价单历史
- 查看自己的客户信息

### 管理员操作流程

#### 1. 产品管理
- 添加新产品：品类、系统、产品编号1、产品编号2
- 查看、删除现有产品

#### 2. 价目表管理
- 导入/导出价目表（JSON格式）
- 重置为默认价格数据
- 查看当前价格区间

#### 3. 用户管理
- 添加新用户（销售员/管理员）
- 设置用户信息：用户名、密码、角色、联系方式
- 管理现有用户

#### 4. 系统设置
- 公司信息：名称、地址、电话、邮箱
- 付款条款
- 银行信息：账户名、账号、银行、路由号、Zelle、SWIFT

## 数据格式

### 价格表结构
```json
[
  {
    "category": "产品类别",
    "widthMin": 最小宽度(cm),
    "widthMax": 最大宽度(cm),
    "heightMin": 最小高度(cm),
    "heightMax": 最大高度(cm),
    "price": 单价(USD)
  }
]
```

### 产品结构
```json
[
  {
    "id": "产品ID",
    "category": "产品品类",
    "system": "产品系统",
    "code1": "产品编号1",
    "code2": "产品编号2"
  }
]
```

### 用户结构
```json
[
  {
    "id": "用户ID",
    "username": "用户名",
    "password": "密码",
    "role": "角色(admin/sales)",
    "realName": "真实姓名",
    "phone": "电话",
    "email": "邮箱"
  }
]
```

## 部署说明

### 局域网部署
1. 将项目文件放在局域网共享文件夹中
2. 用户通过文件路径访问 `index.html`
3. 支持多用户同时使用，数据本地存储

### 网站集成
1. 将项目文件放在网站目录中
2. 通过URL访问系统
3. 可集成到现有网站导航中

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 注意事项

1. **数据安全**：所有数据存储在浏览器本地，清除浏览器数据会丢失信息
2. **备份建议**：定期导出价格表和产品数据作为备份
3. **网络依赖**：PDF生成功能需要网络连接加载jsPDF库
4. **权限管理**：首次使用请修改默认密码
5. **数据隔离**：销售员无法查看其他用户的数据

## 后续扩展

- 数据库存储（MySQL/PostgreSQL）
- 多语言支持（中英文切换）
- 更丰富的报表功能
- 与ERP系统集成
- 在线支付集成
- 客户关系管理（CRM）

## 技术支持

如有问题或建议，请联系系统管理员。

---

**版本**: 2.0.0  
**更新日期**: 2024年12月  
**主要更新**: 权限分离、USD币种、多行查价、双语支持
